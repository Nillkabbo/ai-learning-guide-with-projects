# Chapter 10: Advanced Prompting Strategies - Cursor Rules

## Chapter Context

This chapter covers advanced prompting strategies for complex problems: self-consistency, tree-of-thought, ReAct, multi-agent debate, and reflexion. These are multi-step reasoning frameworks beyond basic prompting.

## Key Concepts

### 1. Self-Consistency Method
- Run prompt multiple times (5-10)
- Higher temperature (0.7) for diversity
- Find most common answer (consensus)
- Improves accuracy on single-answer tasks
- Cost: multiple API calls

### 2. Tree-of-Thought (ToT)
- Explore multiple reasoning paths
- Evaluate each path
- Choose best path
- Backtrack if needed
- For complex, multi-step problems

### 3. ReAct (Reasoning and Acting)
- Reasoning: think about problem
- Acting: take action (use tool)
- Observing: see result
- Loop until goal achieved
- For dynamic information gathering

### 4. Multi-Agent Debate
- Multiple AI agents (2-5)
- Different perspectives/personas
- Debate and argue
- Reach consensus
- For high-stakes decisions

### 5. Reflexion
- Self-reflection on reasoning
- Learn from mistakes
- Improve over iterations
- Iterative refinement
- For complex, evolving problems

## Important Code Patterns

### Self-Consistency
```python
from collections import Counter

def self_consistency(prompt, num_runs=5):
    responses = []
    for _ in range(num_runs):
        response = ai.call(prompt, temperature=0.7)
        responses.append(response)
    most_common = Counter(responses).most_common(1)[0][0]
    return most_common
```

### Tree-of-Thought
```python
def tree_of_thought(problem):
    # Generate multiple reasoning paths
    paths = generate_paths(problem)
    # Evaluate each path
    scores = [evaluate(path) for path in paths]
    # Choose best path
    best = paths[scores.index(max(scores))]
    return solve(best)
```

### ReAct Loop
```python
def react_agent(goal):
    while not goal_achieved():
        # Reasoning
        thought = reason(current_state, goal)
        # Acting
        action = decide_action(thought)
        # Observing
        observation = execute_action(action)
        # Update state
        update_state(observation)
    return result
```

## Common Mistakes to Avoid

1. **Too many self-consistency runs**: Diminishing returns, high cost
2. **Complex ToT trees**: Start simple, add complexity gradually
3. **Infinite ReAct loops**: Always have termination conditions
4. **Too many agents**: 2-3 usually sufficient
5. **No reflection criteria**: Define what to reflect on

## Integration Points

- **Chapter 9**: Builds on fundamental prompting
- **Chapter 11**: Structured output with these strategies
- **Chapter 13**: Agents use ReAct pattern
- **Chapter 16**: Multi-agent systems extend debate

## Related Chapters

- **Chapter 9**: Fundamental prompting (foundation)
- **Chapter 11**: Structured output (applies strategies)
- **Chapter 13**: Agents (uses ReAct)
- **Chapter 16**: Multi-agent (extends debate)
