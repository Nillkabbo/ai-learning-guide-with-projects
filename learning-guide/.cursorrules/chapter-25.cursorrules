# Chapter 25: Deployment and DevOps for AI Applications - Cursor Rules

## Chapter Context

This chapter covers deploying AI applications to production safely. Students learn containerization, CI/CD pipelines, environment management, feature flags, rollback strategies, and building complete DevOps systems. Essential for production deployment.

## Key Concepts

### 1. Deployment Challenges
- AI deployment is different (models, prompts, non-deterministic)
- Can't roll back models like code
- Need A/B testing for models/prompts
- Feature flags are critical
- Zero-downtime deployments

### 2. Containerization
- Docker containers
- Dockerfile (instructions)
- Image building
- Portability (runs anywhere)
- Consistency (dev = prod)

### 3. CI/CD Pipelines
- Continuous Integration (automated testing)
- Continuous Deployment (automated deployment)
- Quality gates (tests must pass)
- GitHub Actions, GitLab CI, Jenkins
- Automated, repeatable, safe

### 4. Feature Flags
- Gradual rollouts (10% → 50% → 100%)
- A/B testing (compare models/prompts)
- Safe model updates
- Prompt versioning
- Instant rollback (no deployment needed)

### 5. Rollback Strategies
- Code rollback (git revert, redeploy)
- Model rollback (feature flag switch)
- Prompt rollback (feature flag switch)
- Database migrations (backward compatible)
- Zero-downtime (blue-green, canary)

## Important Code Patterns

### Dockerfile
```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
EXPOSE 8000
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### Feature Flag
```python
from feature_flags import FeatureFlag

def analyze_with_model(data):
    if FeatureFlag.is_enabled("new_model_v2", user_id=data.user_id):
        return new_model_v2.analyze(data)
    else:
        return old_model.analyze(data)
```

### CI/CD Pipeline (GitHub Actions)
```yaml
name: CI/CD
on: [push]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
      - run: pip install -r requirements.txt
      - run: pytest
  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - run: docker build -t app .
      - run: docker push app
      - run: kubectl rollout restart deployment/app
```

## Common Mistakes to Avoid

1. **No containerization**: Inconsistent environments
2. **Manual deployment**: Error-prone, slow
3. **No feature flags**: Can't safely update AI
4. **No rollback plan**: Stuck when things break
5. **Deploying to prod directly**: Always use staging

## Integration Points

- **Chapter 24**: Testing (tests in CI/CD)
- **Chapter 23**: Monitoring (monitor deployments)
- **Chapter 19**: Architecture (deployment architecture)

## Related Chapters

- **Chapter 24**: Testing (tests in CI/CD)
- **Chapter 23**: Monitoring (monitor deployments)
- **Chapter 19**: Architecture (deployment architecture)
